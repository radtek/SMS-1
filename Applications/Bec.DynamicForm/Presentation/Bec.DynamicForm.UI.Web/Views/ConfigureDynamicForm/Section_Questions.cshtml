@using Ext.Net
@using Ext.Net.MVC
@model  IEnumerable< Bec.DynamicForm.Entities.DTO.FormSectionDTO>
@{
    ViewBag.Title = "Dynamic Form Questions";
    Layout = "~/Views/Shared/_LayoutBase.cshtml";

}

@section headtag
{
    <style>
        .tree {
            float: left;
            margin: 20px;
            border: 1px solid #c3daf9;
        }
    </style>

    <script>
        var addRecord = function (form, grid) {
            if (!form.getForm().isValid()) {
                Ext.net.Notification.show({
                    iconCls: "icon-exclamation",
                    html: "Form is invalid",
                    title: "Error"
                });

                return false;
            }

            grid.store.insert(0, new Person(form.getForm().getValues()));
            form.getForm().reset();
        };

    </script>



}
@section body
{

    @(Html.X().GridPanel()
        .Title("Icons with text")
        .Width(600)
        .Height(300)
        .StoreID("Store1")
        .ColumnModel(
            Html.X().Column()
                .Text("FormSectionId")
                        .DataIndex("FormSectionId")
                .Flex(1),
            Html.X().Column()
                .Text("SectionName")
                        .DataIndex("SectionName")
                .Width(75),            
            Html.X().CommandColumn()
                .Width(110)
                .Commands(
                    Html.X().GridCommand()
                        .CommandName("Delete")
                        .Icon(Icon.Delete)
                        .Text("Delete"),

                    Html.X().GridCommand()
                        .CommandName("Edit")
                        .Icon(Icon.NoteEdit)
                        .Text("Edit"),
                    Html.X().LinkButton()                              
                          .OnClientClick("")
                          .Text("Edit")
                          
                )
                .Listeners(ls => ls.Command.Handler = "Ext.Msg.alert(command, record.data.company);")
               
        )
                .TopBar(
                        Html.X().Toolbar()
                            .Items(
                                Html.X().Button()
                                    .Text("Add")
                                    .Icon(Icon.Add)
                                            .Handler("addRecord")
                             )
                               
                    ) 
        
)


}





