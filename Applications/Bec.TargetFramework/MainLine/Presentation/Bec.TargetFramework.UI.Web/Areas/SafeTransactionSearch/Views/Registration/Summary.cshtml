@using Bec.TargetFramework.Entities
@using Bec.TargetFramework.Web.Framework.Extensions
@using Ext.Net
@using Ext.Net.MVC
@model Bec.TargetFramework.Entities.RegistrationSummaryDTO

@{
    var X = Html.X();
    Layout = "~/Views/Shared/_BaseLayoutNoNotificationViewer.cshtml";
}



@section headTag
{
<style>
    .text-bg {
        position: relative;
    }

        .text-bg p {
            position: absolute;
            background: url("~/Content/resources/images/sms/slider-text-bg.png");
            width: 250px;
            height: 220px;
            color: #fff;
            font-size: 40px;
            padding: 10px;
            top: 0px;
            right: 0px;
        }



    .main-img {
        margin-bottom: 30px;
    }

    .content {
        width: 1000px;
        margin: 0 auto;
    }
</style>

}

@section mainBody
{
@(Html.X().Store().AutoLoad(true).ID("BranchStore")
          .Model(Html.X().Model().GenerateModel<FirmBranchDTO>().Name("Branches"))
          .Proxy(p => p.Add(Html.X().AjaxProxy().GenerateAjaxProxy("ID", Url.Action("GetBranches", "Registration", new { area = "SafeTransactionSearch" })))))






    @(Html.X().Viewport().ID("SummaryViewPort").OverflowX(Overflow.Auto).OverflowY(Overflow.Auto)
          .Items(
              X.Panel().Region(Region.North).ItemsFromPage(this, "~/Views/Portal/_TopBar.cshtml"),
                      X.Image().Cls("text-bg content").ImageUrl(@Url.Content("~/Content/resources/images/STS/ProfessionalFinish.jpg")),
                      X.Panel().ID("SummaryViewForm").Region(Region.Center).ColumnWidth(1).LayoutConfig(new VBoxLayoutConfig { Align = VBoxAlign.Center, Pack = BoxPack.Center }).Layout(LayoutType.VBox).BodyPadding(5).Region(Region.Center).Padding(5).Flex(1)
                          .Items
                          (
                                  X.Label().Text("Thank you for your Payment. You have completed the registration of:"),
                                  X.Panel().Border(true).Width(640).Padding(5).Items(
                                              X.Container().Layout(LayoutType.Column).Padding(3).MinWidth(700)
                                                  .Items(
                                                      X.Container().ColumnWidth(0.25)
                                                          .Items(
                                                              X.Panel().ApplyPanelDefaults("Firm").Layout(LayoutType.Column)
                                                                  .Items
                                                                  (
                                                                        X.Label().Text(Model.FirmRegisteredName)

                                                                  )),

                                                                  X.Container().ColumnWidth(0.35)
                                                          .Items(
                                                              X.Panel().ApplyPanelDefaults("HeadOffice").Layout(LayoutType.Column)
                                                                  .Items
                                                                  (
                                                                       X.Label().Text(Model.HeadOfficeAddress.Line1 + " " + Model.HeadOfficeAddress.Line2 + " " + Model.HeadOfficeAddress.City + " " + Model.HeadOfficeAddress.Country + " " + Model.HeadOfficeAddress.PostalCode)

                                                                  )),
                                                                  X.Container().ColumnWidth(0.25)
                                                          .Items(
                                                              X.Panel().ApplyPanelDefaults("Myself").Layout(LayoutType.Column)
                                                                  .Items
                                                                  (
                                                                      X.Label().Text(Model.COTitle + " " + Model.COFirstName + " " + Model.COLastName)

                                                               ))
                                                       ),

                                                       X.Container().ColumnWidth(1).ID("BranchesandUsersContainer")
                                                    .Items
                                                    (
                                                             X.Panel().ApplyPanelDefaults("RegistrationSummaryBranchesAndUsers").Items(
                                                           X.Label().ApplyFieldDefaults("RegistrationSummaryBranchesAndUsers", "RegistrationSummaryBranchesandUsers"),

                                                           X.GridPanel()
                                                                    .MinHeight(50)
                                                                    .MinWidth(400)
                                                                    .HideHeaders(true)
                                                                    .ID("BranchesGrid")
                                                                    .StoreID("BranchStore")
                                                                    .ColumnModel(
                                                                                    Html.X().Column().Text("ID").DataIndex("ID").Hidden(true),
                                                                                    Html.X().Column().DataIndex("Name").Width(400)
                                                                                )
                                                                    .Plugins(Html.X().RowExpander().ID("BranchesUser")
                                                                    .AutoDataBind(true)
                                                                    .Loader(Html.X().ComponentLoader()
                                                                    .Url(Url.Action("GetUsersGrid"))
                                                                    .Mode(LoadMode.Component)
                                                                    .LoadMask(mask => mask.ShowMask = true)
                                                                    .Params(new { id = JRawValue.From("this.record.getId()") })
                                                                 )),

                                                           X.Label().ApplyFieldDefaults("RegistrationSummaryBranchesAndUsers", "RegistrationSummaryBranchesandUsersFooter")

                                                           )
                                                    ),
                                    
                                     X.Container().ColumnWidth(1).Padding(5).Items(
                                            X.Panel().ApplyPanelDefaults("RegistrationSummaryFirmOptions").Layout(LayoutType.Fit).Items(
                                                X.Label().Text("You have"),
                                                X.Label().Text(" not "),
                                                X.Label().Text("opted to pay for your staff ID checks and selected for them to be renewed every ")
                                            ),

                                                X.Panel().Layout(LayoutType.Fit).Items(
                                                X.Label().Text("You have"),
                                                X.Label().Text(" not "),
                                                X.Label().Text("opted to use ID+ to help verify the identity of your staff. ")
                                            ),



                                            X.Panel().Layout(LayoutType.Fit).Items(
                                                X.Label().Text("You are"),
                                                X.Label().Text(" not "),
                                                X.Label().Text("applying an uplift on your Safe Transaction Search client's AML checks. ")
                                            )
                                        
                                     ),


                                    X.Container().ColumnWidth(1).Padding(5).Items(
                                            X.Panel().ApplyPanelDefaults("YourProducts").Layout(LayoutType.Fit).Items(
                                                X.Label().Text("You have decided"),
                                                X.Label().Text(" not "),
                                                X.Label().Text("to use the <<SCP Partner Name>> Risk Framework for all your Safe Transaction Searches and have subscribed to the <<Support product>> support package. ")
                                            ),
                                            X.Container().ColumnWidth(1).Padding(5).Items(
                                   X.Panel().Layout(LayoutType.Column).Items(
                                            X.CheckboxFor(model => model.NeedSummaryEmail).FieldLabel(""),
                                            X.Label().PaddingSpec("0 2 0 2").ApplyFieldDefaults("YourProducts", "RegistrationSummaryEmail")
                                      ) 
                          )))

                                        .BottomBar(Html.X().Toolbar().LayoutConfig(new HBoxLayoutConfig { Align = HBoxAlign.Top }).Items(
                                                X.ToolbarFill(),
                                                X.Button().Text("Log Off").Icon(Icon.NextGreen)
                                                            .DirectEvents(de =>
                                                                                {
                                                                                    de.Click.Url = Url.Action("Logout", "Registration", new { area = "SafeTransactionSearch" });
                                                                                    de.Click.FormID = "SummaryViewForm";
                                                                                    de.Click.Method = HttpMethod.POST;

                                                                                }),

                                                X.Button().Text("Dashboard").Icon(Icon.NextGreen)
                                                            //.DirectEvents(de =>
                                                            //        {
                                                            //            de.Click.Url = Url.Action("Logout", "Registration", new { area = "SafeTransactionSearch" });
                                                            //            de.Click.FormID = "SummaryViewForm";
                                                            //            de.Click.Method = HttpMethod.POST;

                                                            //        })                
                                              )      )
                                )
                          
                          ))
    }